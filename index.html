<form id="calculator" novalidate>
	
	<p>
		Trim width:
		<input
			type="number"
			v-model.number="width"
			min="0"
			step="0.25"
		>
		inches
	</p>
	
	<p>
		Trim height:
		<input
			type="number"
			v-model.number="height"
			min="0"
			step="0.25"
		>
		inches
	</p>
	
	<p>
		Bleed:
		<input
			type="number"
			v-model.number="bleed"
			min="0"
			step="0.25"
		>
		inches
	</p>
	
	<p>
		Paper type:
		<select v-model.number="paper">
			<optgroup label="Black and white-interior books:">
				<option value="0.002252">White paper (0.002252")</option>
				<option value="0.0025">Cream paper (0.0025")</option>
			</optgroup>
			<optgroup label="Color-interior books:">
				<option value="0.002347">White paper (0.002347")</option>
			</optgroup>
		</select>
	</p>
	
	<p>
		Page count:
		<input
			type="number"
			v-model.number="count"
			min="0"
			step="1"
		>
		pages
	</p>
	
	<p>
		<b>Page dimensions:</b>
		<br>
		Width: ({{ $data.width }}" + {{ $data.bleed }}") = {{ $data.result.page.width }}"
		<br>
		Height: ({{ $data.height }}" + {{ $data.bleed }}" + {{ $data.bleed }}") = {{ $data.result.page.height }}"
	</p>
	
	<p>
		<b>Spine width:</b>
		<br>
		Width: ({{ $data.count }} x {{ $data.paper }}") = {{ $data.result.spine.width }}"
	</p>
	
	<p>
		<b>Spread dimensions with spine:</b>
		<br>
		Width: ({{ $data.result.page.width }}" + {{ $data.result.page.width }}" + {{ $data.result.spine.width }}") = {{ $data.result.spread.width }}"
		<br>
		Height: {{ $data.result.spread.height }}"
	</p>
	
	<!-- <p><pre>data: {{ $data | json 2 }}</pre></p> -->
	
</form>

<script src="https://unpkg.com/vue@2.1.3/dist/vue.min.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>

<script>
	
	new Vue({
		el: '#calculator',
		data: {
			width: 8.5,
			height: 8.5,
			bleed: 0.125,
			paper: 0.002347,
			count: 101,
			result: {
				spine: {
					width: 1,
				},
				page: {
					width: 1,
					height: 1,
				},
				spread: {
					width: 1,
					height: 1,
				}
			},
		},
		methods: {
			calculate: function() {
				this.$nextTick(function() {
					var width = this.result.page.width = (this.width + this.bleed);
					var height = this.result.page.height = (this.height + (this.bleed * 2));
					var spine = this.result.spine.width = (this.count * this.paper);
					this.result.spread.width = ((width * 2) + spine);
					this.result.spread.height = height;
				});
			},
		},
		updated: function() {
			this.calculate.call(this);
		},
		mounted: function() {
			this.calculate.call(this);
		},
	});
	
</script>
